[
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "Data",
    "section": "",
    "text": "Before we begin, all of the cleaning and combining for our datasets is done with the code in this load and clean file, so please head there for a more detailed breakdown of how all of this was done.\nFirst Data Set:\nThe Effect of Prior Police Contact on Victimization Reporting: Results From the Police-Public Contact and National Crime Victimization Surveys, United States, 2002-2011 (ICPSR 36370) Dataset Link\nThe dataset is collected by the Bureau of Justice Statistics (BJS), which is the primary statistical agency of the US’s Department of Justice. It was first established in 1979 in order to better understand statistics about crimes in the United States. The data collected in these studies provides information on how each individuals’ prior interactions with law enforcement, both directly and through the experiences of others, influence their decisions to report crimes. By linking data from the National Crime Victimization Survey (NCVS) with the Police-Public Contact Survey (PPCS), the researchers could explore the relationship between police encounter experiences and crime reporting behavior. The combined dataset used in this study contains data about survey participants in 2002, 2008, and 2011.\nThe dataset comprises person-level, household-level, and police encounter data, emphasizing key variables to study the relationship between police contact and victimization reporting. At the person level, variables include PER_ID (Unique person identifier), age, race, contact (if the respondent had police contact in the past 12 months), and number of face-to-face police contacts within the past year. At the household level, HH_ID identifies households, while hhpov (poverty status) and HH_size (number of household members) contextualize socioeconomic status. Police encounters are detailed with REASON (reason for contact), arrested (if the respondent was arrested), and cuffed (if handcuffed), which capture the nature of police interactions. Victimization variables like d_HH_P23 (household crime victimization), time2vic_inc_P23HH (time between police interview and crime), and notify_inc_P23HH (police notified of household crime) provide insights into subsequent incidents. Additional demographic variables such as education, mar_stat (marital status), and work_lw (employment status) add socioeconomic context.\nIn terms of cleaning the data, we originally started by planning to remove rows with over 90,000 na values, but quickly realized that some of these highlighted rare experiences with police that are information that would be crucial to our analysis.\nIn noticing that, we decided to more forwards by removing all columns we felt contained information which were not generally relevant to the analysis we wish to conduct. This was done by reading through the documentation for the dataset and filtering out columns we felt were unhelpful to our analysis. Below are a list of a few columns we removed and why:\nPSTRATA: PSEUDO-STRATUM CODE - We didn’t understand what this datapoint was representing, or how to use it.\nSECUCODE - STANDARD ERROR COMPUTATION UNIT CODE: Again another code, which is vague in description.\nnum_fu_HHint, num_fu_perint - Number of follow-up HH interviews post-PPCS, Number of follow-up PERSON interviews post-PPCS : The number of follow-ups for each person or household isn’t relevant to us.\nColumns ending with “_sub”: Data wasn’t originally collected, and carried back later on.\ntime2vic_inc_P23PER: We don’t want to investigate months from PPCS interview to victimization\nThis is all done in our cleaning script. In this script we start by removing certain columns, and then outlining the remaining columns as numerical or categorical, in order to check for inconsistent data values and providing default values to missing data. For most cases, we consider missing data to be okay.\nSecond Data Set: Firearm Suicide Proxy for Household Gun Ownership, 1949-2020 Dataset Link\nThis dataset was collected by Megan Kang and can be found on the Harvard Dataverse collection. The proxy measures household gun ownership trends at a state level. Notably it is not reliant on self reported data, which can be prone to certain biases. This dataset ranges a long period of time from 1949-2020 and represents the longest-ranging database of state-level gun ownership.\nParticularly this dataset includes information across districts, states, and years, and contains comprehensive variables that allow us to study the complex relationship between geography and household gun ownership and misuse. At the district-level we have variables that show the total population of the district and homicide/suicide rates caused by firearms and non-firearms.\nOur goal with this dataset was to combine it with our original dataset related to police sentiment. Minor initial cleaning was performed, removing the following columns/variables:\nfss - a metric irrelevant to our analysis. districts - our original dataset used regions, which we could determine using the state level data, concetanating them into relevant regional variables. suicide related metrics - we felt that homicide information was more relevant to the way police may choose to approach situations. All year values besides the years which were present in our original dataset were removed, due to their lack of relevancy to our analysis.\nCombination In combining the datasets we chose to combine information such that we would display information based on the region and year combinations. This is because the original data was presented across 4 different regions: Northeast, Midwest, South, and West as well as 3 years: 2002, 2008, and 2011.\nOur final combined dataset includes the following variables\n\nsuppressPackageStartupMessages(library(tidyverse))\nvariable_table &lt;- tibble(\n  Variable_Name = c(\"region\", \"year\", \"total_count\", \"WHITE_NH_PROP\", \"B_NH_PROP\", \"HISPANIC_PROP\", \"OTHER_MULTI_NH_PROP\", \"CONTACT_FREQ\", \"OC_FRISK_PROP\", \"TC_FRISK_PROP\", \"VSRCH_PROP\", \"ARREST_PROP\", \"CUFFED_PROP\", \"PROPER_PROP\", \"IMPROPER_PROP\", \"AVG_CONT\", \"population\", \"fa_homicides\", \"nfa_homicides\", \"homicides\", \"fa_homicide_rate\", \"nfa_homicide_rate\", \"homicide_rate\"),\n  Variable_Description = c(\"Region the data is from\", \"Year the data is from\", \"Total number of responses in the police sentiment dataset\", \"White non-hispanic proportion of responses for police sentiment\", \"Black non-hispanic proportion of responses for police sentiment\", \"Hispanic proportion of responses for police sentiment survey\", \"Other/multiracial/Non-hispanic proportion of responses for police sentiment survey\", \"Proportion of responders who had contact with law enforcement\", \"Proportion of stop and frisks for non-traffic stops\", \"Proportion of stop and frisks for traffic stops\", \"Proportion of vehicle searchs\", \"Proportions of contacts that ended in arrest\", \"Proportion of contacts that included cuffing\", \"Proportion of contacts deemed handled proper\", \"Proportion of contacts deemed unproperly handled\", \"Average number of contacts in the last year\", \"Total region population from US census\", \"Number of Firearm homicides\", \"Number of non-firearm homicides\", \"number of homidides\", \"firearm homicides per 100,000\", \"non-firearm homicides per 100,000\", \"homicides per 100,000\")\n)\n\nprint(variable_table, n = Inf)\n\n# A tibble: 23 × 2\n   Variable_Name       Variable_Description                                     \n   &lt;chr&gt;               &lt;chr&gt;                                                    \n 1 region              Region the data is from                                  \n 2 year                Year the data is from                                    \n 3 total_count         Total number of responses in the police sentiment dataset\n 4 WHITE_NH_PROP       White non-hispanic proportion of responses for police se…\n 5 B_NH_PROP           Black non-hispanic proportion of responses for police se…\n 6 HISPANIC_PROP       Hispanic proportion of responses for police sentiment su…\n 7 OTHER_MULTI_NH_PROP Other/multiracial/Non-hispanic proportion of responses f…\n 8 CONTACT_FREQ        Proportion of responders who had contact with law enforc…\n 9 OC_FRISK_PROP       Proportion of stop and frisks for non-traffic stops      \n10 TC_FRISK_PROP       Proportion of stop and frisks for traffic stops          \n11 VSRCH_PROP          Proportion of vehicle searchs                            \n12 ARREST_PROP         Proportions of contacts that ended in arrest             \n13 CUFFED_PROP         Proportion of contacts that included cuffing             \n14 PROPER_PROP         Proportion of contacts deemed handled proper             \n15 IMPROPER_PROP       Proportion of contacts deemed unproperly handled         \n16 AVG_CONT            Average number of contacts in the last year              \n17 population          Total region population from US census                   \n18 fa_homicides        Number of Firearm homicides                              \n19 nfa_homicides       Number of non-firearm homicides                          \n20 homicides           number of homidides                                      \n21 fa_homicide_rate    firearm homicides per 100,000                            \n22 nfa_homicide_rate   non-firearm homicides per 100,000                        \n23 homicide_rate       homicides per 100,000                                    \n\n\nThe first step of doing so was to find the information for each region x year combination that we wanted to keep from the first dataset. This corresponds to the variables ranging from 3-16 in the table above.\nFor these variables there are a few main categories:\ntotal_count - a metric taken directly from the original data racial demographics - which were taken by finding the proportion of certain races against the entire population event proportions - which were taken by finding the average number of occurrences across the total number of police contacts\nNext we had to transform the firearm dataset to follow the same region x year format. Since our firearm dataset was broken down by states, we would have to use the state values to concatenate the original corresponding regions. To do this designation we used the Census Designated Regions of the United States, a framework possibly used by the dataset. This could be a potential point of error in our analysis, as there was no certain information about the regional breakdown utilized in the first dataset. Therefore, while we could not confirm perfect regional alignment, we believe this approximation is reasonable for our analysis. Thereafter, we simply grouped by region x year and recalculated the simple metrics in the original dataset but across the new breakdown.\nFinally we used full_join to combine our two transformed data sets to create a new combined dataset that shared the same grouping breakdowns."
  },
  {
    "objectID": "analysis.html#police-interaction-data-analysis",
    "href": "analysis.html#police-interaction-data-analysis",
    "title": "Analysis",
    "section": "Police Interaction Data Analysis",
    "text": "Police Interaction Data Analysis\n\nProper Conduct\nThe first step of our EDA involves examining the “PROPER” variable, a binary variable which displays whether or not the police behaved properly during each interaction. This binary variable is reported for 19,321 of the 105,273 total cases, with 1,853 reported cases of the police behaving improperly and 17,468 cases of the police reporting properly. A plot is generated here to show how the proportion of improper police actions differs among different race populations.\n#| '!! shinylive warning !!': |\n#|   shinylive does not work in self-contained HTML documents.\n#|   Please set `embed-resources: false` in your metadata.\n#| standalone: true\n#| viewerHeight: 640 # You will have to adjust this to fit everything\n#| echo: false\n\nsuppressPackageStartupMessages(library(shiny))\nsuppressPackageStartupMessages(library(tidyverse))\noptions(\"readr.edition\" = 1) \n\npolice_interaction &lt;- read_rds(\"https://sussmanbu.github.io/ma-4615-fa24-final-project-group-7/dataset_for_shiny/police_interaction.rds\")\n\nregion_labels &lt;- c(\"1\" = \"northeast\", \"2\" = \"midwest\", \"3\" = \"south\", \"4\" = \"west\")\n\npolice_interaction &lt;- police_interaction %&gt;%\n    mutate(REGION = factor(REGION, \n                           levels = c(1, 2, 3, 4), \n                           labels = c(\"northeast\", \"midwest\", \"south\", \"west\")))\n\n# Server Logic\nserver &lt;- function(input, output) {\n    output$improperPlot &lt;- renderPlot({\n        # Filter Data\n        filtered_data &lt;- police_interaction %&gt;%\n            filter(!is.na(PROPER)) %&gt;%\n            {\n                if (input$region != \"All Regions\") {\n                    filter(., REGION == input$region)\n                } else {\n                    .\n                }\n            }\n        \n        # Summarize Improper Proportion and Generate Plot\n        filtered_data %&gt;%\n            group_by(RACE) %&gt;%\n            summarize(\n                improper_proportion = sum(PROPER == 0) / n()\n            ) %&gt;%\n            ggplot(aes(x = RACE, y = improper_proportion, fill = RACE)) +\n            geom_bar(stat = \"identity\") +\n            labs(\n                title = ifelse(input$region == \"All Regions\", \n                               \"Proportion of Improper Police Behavior by Race (All Regions)\",\n                               paste(\"Proportion of Improper Police Behavior by Race in\", input$region)),\n                x = \"Race\",\n                y = \"Proportion of Improper Conduct\"\n            ) +\n            theme_minimal() +\n            theme(\n                axis.text.x = element_text(angle = 45, hjust = 1),\n                legend.position = \"none\"\n            )\n    })\n}\n\n# UI Layout\nui &lt;- fluidPage(\n    titlePanel(\"Improper Police Behavior by Race with Region Filter\"),\n    \n    sidebarLayout(\n        sidebarPanel(\n            selectInput(\n                inputId = \"region\",\n                label = \"Select Region:\",\n                choices = c(\"All Regions\", levels(police_interaction$REGION)),\n                selected = \"All Regions\"\n            )\n        ),\n        \n        mainPanel(\n            plotOutput(outputId = \"improperPlot\")\n        )\n    )\n)\n\nshinyApp(ui = ui, server = server)\n\nThe plot shows (with filter on “All Regions”) that the “Black, Non-Hispanic” population experienced a much higher proportion of improper police interactions than all other populations, with about 15% of reported interactions classified as improper. Among “Hispanic” and “Other or multiracial, Non-Hispanic” populations, the proportion of improper police interacts was about 10%, while the rate of improper police interactions among members of the “White, Non-Hispanic” population was about 7%.\nIn making this observation, it is important to note that the proportions could be skewed due to the number of responses received for each group and the nature of data collection through a survey, which may have prompted individuals who experienced racial discrimination to be more likely to respond.\n\n\nModeling\nFor data modeling, the data was split into two. 80% of the data was randomly selected for the training dataset and 20% was randomly selected for the testing dataset. The model attempts to predict whether someone would be arrested based on their race, years of education, if their household is living in poverty, and their gender.\nWe chose the variables of race, years of education, and poverty to construct our model because these variables are numerical or boolean values, are present in most or all of the participant data, and display the strongest correlation with the probability of being arrested. While other variables, such as the number of years being married, could have been used, variables like these are usually not present for many survey participants and don’t provide much correlation with the probability of being arrested.\nWe note that, although it is not necessary to actually test our model because it will not be used to make predictions, we decided to incorporate a testing dataset to simply examine the relationship between the predictors and the PROPER metric.\nIn the training set, the F-statistic is far over 1 and the p-values show over 95% confidence in all the response variables being significant.\n\n\nCoefficients and p-values:\n\n\n                                          Estimate     Pr(&gt;|t|)\n(Intercept)                             0.82045673 0.000000e+00\nRACEHispanic                            0.03523206 3.502376e-03\nRACEOther or multiracial, Non-Hispanic  0.02586777 9.504918e-02\nRACEWhite, Non-Hispanic                 0.04375101 2.387572e-06\nEDUCATION                               0.00472514 6.753211e-06\nHHPOV                                  -0.02674277 1.543578e-03\nMALE                                   -0.02438871 2.275095e-06\n\n\n\nR-squared:\n\n\nMultiple R-squared: 0.007280127 \n\n\nAdjusted R-squared: 0.006800707 \n\n\n\nF-statistic and p-value:\n\n\nF-statistic: 15.18527 on 6 and 12424 DF, p-value: 2.072703e-17 \n\n\nThe logistic regression model was trained to predict whether an individual would report proper or improper police behavior based on a subset of predictors, including race, years of education, household poverty status, and gender. These variables were selected because they represent key demographic factors strongly associated with the likelihood of proper police behavior, as identified through EDA.\nThe model achieved an R-squared value of 0.008, indicating that it explains a very small portion of the variability in improper police behavior. While some predictors are statistically significant, their overall contribution to explaining the outcome is minimal. This suggests that other unobserved factors likely play a larger role in determining improper police behavior.\nOn the other hand, when looking at the variables outlining the racial demographic of the survey responses we notice that being Hispanic, Non-Hispanic multiracial, or White (Non-Hispanic) is associated with a slightly higher probability of police behaving properly compared to the baseline racial group (Black Non-Hispanic), with coefficients of 0.0413, 0.0331, and 0.0538, respectively, all of which are statistically significant (p-values of 0.000619, 0.033628, 7.03e-09 respectively). This shows that the Black Non-Hispanic race sees a statistically significant higher likelihood of reporting improper police behavior based on their race alone.\nWe also see a strong correlation for the predictors of education, household poverty, and gender. Individuals with more years of education are more likely to report proper police behavior, as indicated by a coefficient of 0.00386 (p-value of 0.000197). Household poverty shows a negative association with proper police behavior, with a coefficient of -0.0242 and a p-value of 0.00424. Additionally, males are significantly more likely to report improper police behavior compared to females, as indicated by a coefficient of -0.0277 (p-value 7.22e-08).\nThis model suggests that Black Non-Hispanic, lower-income, uneducated, males are the demographic most likely to experience improper behavior from a police officer during any given interaction.\nThe summary of this model denotes that there are very small p-values of less than 2.2e-16,indicating that the combination of predictors (the demographics including race, years of education, household poverty status, and gender) contributes meaningfully to explaining the likelihood of arrest."
  },
  {
    "objectID": "analysis.html#firearm-proxy-dataset",
    "href": "analysis.html#firearm-proxy-dataset",
    "title": "Analysis",
    "section": "Firearm Proxy Dataset",
    "text": "Firearm Proxy Dataset\nThe second dataset to be incorporated describes the number of homicides, the number of suicides, and the number of suicides done with firearms for whites & nonwhites within different states from 1949 to 2020.\nThis map represents the rate of homicides by firearm by state. There are different levels of colors to represent the homicide rate by state, and the diagrams are split into 2002, 2008, and 2011.\n\n\n\n\n\n\n\n\n\nFrom this map, we notice that across the 3 years we seek to observe, it’s generally true that states within the southern and Midwestern regions of the United States have the highest rate of firearm homicide.\nThis is useful to understand since we can use this information to dig deeper into the causes behind negative police behavior, and fortify and further explain our bar chart and linear model describing the proportion of race vs. proper police behavior. Specifically, this may help us determine whether race or the level of neighborhood gun violence are more useful indicators for particular aspects of police behavior in our study."
  },
  {
    "objectID": "analysis.html#combined-regional-dataset",
    "href": "analysis.html#combined-regional-dataset",
    "title": "Analysis",
    "section": "Combined Regional Dataset",
    "text": "Combined Regional Dataset\nThe plot below shows a breakdown of the firearm homicide rates for each region across the years relevant to our analysis.\n\n\n\n\n\n\n\n\n\n\nIntegrating Police Behavior and Firearm Homicides\nTo deepen our analysis, we explored whether the rate of firearm homicides in a region or state-level factors could help explain variations in proper and improper police behavior. By combining the PROPER variable from the police interaction dataset with the fa_homicide_rate variable, we created models to examine how firearm homicide rates influence police behavior across different regions.\n\n\nAnalysis of Firearm Homicide Rate and Police Behavior\nFirst, we visualized the average rate of firearm homicides for states with higher proportions of improper police behavior. This approach highlights how neighborhood violence may correlate with reported police misconduct.\n\n\n`geom_smooth()` using formula = 'y ~ x'\n\n\n\n\n\n\n\n\n\nThe plot shows a slight positive trend, suggesting that states with higher firearm homicide rates tend to have higher proportions of improper police behavior. However, the relationship is not uniform across all regions.\n\n\nLinear Model Connecting Firearm Homicide Rates and Proper Police Behavior\nTo quantify this relationship, we modeled the binary PROPER variable against the fa_homicide_rate and regional demographic proportions. This analysis combines insights from both datasets to explore whether firearm homicide rates, demographics, and regions collectively influence police behavior.\n\n\nCoefficients and p-values:\n\n\n                       Estimate   Pr(&gt;|t|)\n(Intercept)          0.72947466 0.02808213\nfa_homicide_rate    -0.01763306 0.55358123\nB_NH_PROP            1.70439477 0.31638794\nHISPANIC_PROP        1.43526981 0.07857210\nOTHER_MULTI_NH_PROP  0.42947248 0.73956531\nregionnortheast     -0.03802162 0.30553477\nregionsouth         -0.21447303 0.21967772\nregionwest          -0.16493963 0.19783890\n\n\n\nR-squared:\n\n\nMultiple R-squared: 0.7712447 \n\n\nAdjusted R-squared: 0.3709228 \n\n\n\nF-statistic and p-value:\n\n\nF-statistic: 1.926562 on 7 and 4 DF, p-value: 0.2745619 \n\n\n\n\nAnalysis of Results\nThe linear model results show that various predictors, including homicide rates and racial demographics, explain a portion of the variation in the proportion of improper police behavior. Here’s a closer examination of each predictor:\n\nIntercept (Estimate = 0.7295, p-value = 0.0281): The intercept is statistically significant, suggesting that when all predictor variables are zero, the proportion of improper police behavior (PROPER_PROP) is significantly different from zero.\nfa_homicide_rate (Estimate = -0.0176, p-value = 0.5536): The firearm homicide rate is not statistically significant (p-value &gt; 0.05), suggesting that it does not have a strong direct effect on the proportion of improper police behavior in this model.\nB_NH_PROP (Estimate = 1.7044, p-value = 0.3164): The proportion of Black non-Hispanic individuals is not statistically significant (p-value &gt; 0.05), implying that it does not have a significant impact on the outcome in this context.\nHISPANIC_PROP (Estimate = 1.4353, p-value = 0.0786): While not quite reaching the 0.05 threshold, this variable is marginally significant at the 0.1 level. This suggests a possible relationship between the proportion of Hispanic individuals and improper police behavior, warranting further exploration.\nOTHER_MULTI_NH_PROP (Estimate = 0.4295, p-value = 0.7396): The proportion of individuals from other multi-racial non-Hispanic groups is not statistically significant, implying that this demographic does not appear to significantly impact improper police behavior.\nregion (northeast, south, and west): The regional dummies (compared to the baseline region) show that being in any of the other regions does not significantly affect the proportion of improper police behavior:\n\n\nnortheast (Estimate = -0.0380, p-value = 0.3055)\nsouth (Estimate = -0.2145, p-value = 0.2197)\nwest (Estimate = -0.1649, p-value = 0.1978) All these p-values are greater than 0.05, indicating no significant differences in improper behavior across the regions.\n\n\n\nModel Fit and Significance\n\nR-squared = 0.7712: The model explains approximately 77% of the variation in improper police behavior. This is a relatively high value, suggesting that the model captures a significant portion of the underlying patterns.\nAdjusted R-squared = 0.3709: The adjusted R-squared value is much lower, indicating that while the model explains some of the variance, a substantial proportion remains unexplained. This suggests that there are likely additional factors influencing improper police behavior that have not been captured by the current model.\nF-statistic = 1.9266, p-value = 0.2746: The overall F-test shows that the predictors together do not significantly explain the variance in improper behavior at the 0.05 significance level. This implies that while some individual predictors might have marginal significance, the model as a whole is not a strong predictor of the outcome.\n\n\n\nReflections and Future Directions\nThe analysis highlights the complexity of understanding improper police behavior and the factors that might contribute to it. The relatively high R-squared value suggests that certain aspects, particularly demographic and regional factors, may partially explain the variation in improper behavior. However, the lower adjusted R-squared value and non-significant predictors indicate that other systemic or situational factors might play a critical role but are not captured in the current model.\n\n\nPotential Areas for Further Investigation:\n\nAdditional Variables: The unexplained variability suggests that there may be other key factors, such as community-police relations, socio-economic status, or local policies, that could provide further insights.\nInteraction Effects: Interactions between race, region, and homicide rates might yield more nuanced insights into how these factors influence police behavior.\nModel Refinement: Regularization techniques like Lasso or Ridge regression could help identify key predictors and reduce multicollinearity, improving model interpretation. By continuing to explore these dynamics, policymakers can develop targeted interventions aimed at reducing both improper police behavior and broader societal issues like firearm violence, ultimately contributing to safer and more equitable communities."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "MA [46]15 Final Project",
    "section": "",
    "text": "Final Project due May 7, 2024 at 11:59pm.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nFinal Blog Post\n\n\n\n\n\nFinal Blog Post wrapping up our projects \n\n\n\n\n\nDec 2, 2024\n\n\nGroup 7\n\n\n\n\n\n\n\n\n\n\n\n\nmore EDA on Other Datasets\n\n\n\n\n\nMore EDA on other datasets \n\n\n\n\n\nNov 18, 2024\n\n\nGroup 7\n\n\n\n\n\n\n\n\n\n\n\n\nOther datasets\n\n\n\n\n\nBlog post describing other datasets we found and our initial thoughts to combine them with our origial dataset. \n\n\n\n\n\nNov 11, 2024\n\n\nGroup 7\n\n\n\n\n\n\n\n\n\n\n\n\nmore EDA\n\n\n\n\n\nMore EDA and Initial thoughts \n\n\n\n\n\nNov 6, 2024\n\n\nGroup 7\n\n\n\n\n\n\n\n\n\n\n\n\nEDA\n\n\n\n\n\nBlog post discussing further EDA and initial thoughts on statistical modeling. \n\n\n\n\n\nNov 4, 2024\n\n\nGroup 7\n\n\n\n\n\n\n\n\n\n\n\n\nData Cleaning and Loading & Data for Equity\n\n\n\n\n\nBlog post outlining specifics of the data and how we went about cleaning it, additionally discussing the data for equity principles, as well as related article. \n\n\n\n\n\nOct 28, 2024\n\n\nGroup 7\n\n\n\n\n\n\n\n\n\n\n\n\nData Background\n\n\n\n\n\nBlog post outlining background information related to our dataset. \n\n\n\n\n\nOct 15, 2024\n\n\nGroup 7\n\n\n\n\n\n\n\n\n\n\n\n\nFirst Blog\n\n\n\n\n\nFirst Blog Post \n\n\n\n\n\nOct 11, 2024\n\n\nGroup 7\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/2024-11-06-more-eda/more-eda.html",
    "href": "posts/2024-11-06-more-eda/more-eda.html",
    "title": "more EDA",
    "section": "",
    "text": "This week, we continued exploring the dataset with a focus on relationships among different variables such as reasons for traffic stops, arrests, and the types of police contacts experienced under different demographical groups.\nFor example, below is a plot being generated. We studied the disparities in experiences of improper police contact among different racial groups. We made a bar plot to illustrate the proportion within each racial group who reported experiencing improper police contact and the result reveals notable differences across racial groups.This insight lays the groundwork for deeper analysis to understand what factors contribute to these differences, potentially using demographic and situational variables in further modeling.\n\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(tidymodels))\ndata &lt;- readRDS(\"dataset/police_interaction.rds\") \ndata |&gt;\n  filter(!is.na(PROPER)) |&gt;\n  group_by(RACE) |&gt;\n  summarize(\n    improper_proportion = sum(PROPER == 0) / n()\n  ) |&gt;\n  ggplot(aes(x = RACE, y = improper_proportion, fill = RACE)) +\n  geom_bar(stat = \"identity\")\n\n\n\n\n\n\n\n\nThis is the second plot that we would like to include here: We made a heatmap that visualizes the correlations between various continuous variables in the dataset, where the color intensity represents the strength and direction of the correlation (with red indicating positive correlations and blue indicating negative correlations). There are notable positive correlations such as HHPOV and WORK_LW and notable negative correlations such as WORK_LW and any high-income indicator. This heatmap helps identify groups of continuous variables that may be related or unrelated, which can be useful in modeling and to understand relationships among the data.\n\nlibrary(tidyverse)\nlibrary(reshape2)\n\n\nAttaching package: 'reshape2'\n\n\nThe following object is masked from 'package:tidyr':\n\n    smiths\n\n# Categorizing variables based on their types\n#removed \"CONTACT\" and \"ERROR\" due to \"Warning in cor(numeric_data, use = \"complete.obs\") : the standard deviation is zero\" error\nbinary_columns &lt;- c(\"MALE\", \"WORK_LW\", \"HHPOV\", \"PUB_HOUSE\",   \"PUB_HOUSE_SUB\", \"REGION\", \"INPERSON\", \"VICAR_CITIZEN\", \"VICAR_PRO_AUTO\", \"VICAR_PRO_PERS\", \"VICAR_OTH_CONT\", \"VICAR_IMPROPER\", \"D_HH_P23\", \"PROPER\")\n\nordinal_columns &lt;- c(\"C4_RACE\", \"MAR_STAT\", \"FREQ_DRV\", \"TENURE\",  \"MSA_STATUS\")\n\ncontinuous_columns &lt;- c(\"AGE\", \"EDUCATION\", \"EDUCATION_SUB\", \"NUM_MOVES\", \"NUM_CONT\", \"HH_SIZE\", \"PPCS_YEAR\", \"N_HH_P1\", \"N_PERS_P1\", \"NUM_CITIZEN_HH\", \"NUM_PRO_AUTO_HH\", \"NUM_PRO_PERS_HH\", \"NUM_OTH_CONT_HH\", \"NUM_IMPROPER_HH\")\n\nfiltered &lt;- data\n# Selecting data by type\nbinary_data &lt;- filtered %&gt;%\n  select(all_of(binary_columns)) %&gt;%\n  select(where(is.numeric))\n\nordinal_data &lt;- filtered %&gt;%\n  select(all_of(ordinal_columns)) %&gt;%\n  select(where(is.numeric))\n\ncontinuous_data &lt;- filtered %&gt;%\n  select(all_of(continuous_columns)) %&gt;%\n  select(where(is.numeric))\n\n# Calculating correlation matrices with appropriate methods\ncor_binary &lt;- cor(binary_data, use = \"pairwise.complete.obs\", method = \"pearson\")\ncor_ordinal &lt;- cor(ordinal_data, use = \"pairwise.complete.obs\", method = \"spearman\")\ncor_continuous &lt;- cor(continuous_data, use = \"pairwise.complete.obs\", method = \"pearson\")\n\n# Creating a heatmap function\nplot_heatmap &lt;- function(cor_matrix, title) {\n  cor_melted &lt;- melt(cor_matrix)\n  ggplot(cor_melted, aes(Var1, Var2, fill = value)) +\n    geom_tile(color = \"white\") +\n    scale_fill_gradient2(low = \"blue\", high = \"red\", mid = \"white\",\n                         midpoint = 0, limit = c(-1, 1), name = \"Correlation\") +\n    labs(title = title, x = \"Variables\", y = \"Variables\") +\n    theme_minimal() +\n    theme(axis.text.x = element_text(angle = 90, hjust = 1),\n          axis.text.y = element_text(angle = 0, vjust = 1))\n}\n\n# Plotting heatmaps for each correlation matrix\nif (ncol(continuous_data) &gt; 1) {\n  print(plot_heatmap(cor_continuous, \"Correlation Heatmap of Continuous Variables\"))\n}\n\n\n\n\n\n\n\n\nFor modeling, we used a linear model to try to predict whether someone would be arrested based on their race, years of education, if their household is living in poverty, and their gender. We separated the data into a train and test set with an 80% split. In the training set, the F-statistic is far over 1 and the p-values show over 95% confidence in all the response variables being significant.\n\nsplit &lt;- initial_split(filtered, prop = .8) #good way to keep yourself honest. splits it by prop % being in training, 1-prop being test\ntraining&lt;- training(split)\ntesting &lt;- testing(split)\npredict_filtered &lt;- training |&gt;\n  filter(!is.na(ARRESTED) & !is.na(RACE) & !is.na(EDUCATION) & !is.na(HHPOV) & !is.na(MALE))\n\nmod1 &lt;- lm(ARRESTED ~ RACE + EDUCATION + HHPOV + MALE, predict_filtered)\n\nIn the test set, the F-statistic is much lower and the p-values and t-stats rise for each variable, with the p-value for each race variable but the intercept being over 0.1. This finding implies that there isn’t a significant relationship on average between these race categories and being arrested, although, for “Other or multiracial, Non-Hispanic”, that could be skewed by the much smaller sample size of the category compared to the other races in the category.\n\npredict_filtered_test &lt;- testing |&gt;\n  filter(!is.na(ARRESTED) & !is.na(RACE) & !is.na(EDUCATION) & !is.na(HHPOV) & !is.na(MALE))\n\nmod2 &lt;- lm(ARRESTED ~ RACE + EDUCATION + HHPOV + MALE, predict_filtered_test)\nplot(mod2)"
  },
  {
    "objectID": "posts/2024-11-11-Other-datasets/Other datasets.html",
    "href": "posts/2024-11-11-Other-datasets/Other datasets.html",
    "title": "Other datasets",
    "section": "",
    "text": "Dataset: Police Sentiment Survey\nDescription The Tempe Police Sentiment Survey dataset captures detailed perceptions of safety and trust in the Tempe community, categorized by demographics such as race, age, gender, education, and income levels. Also, data is catagorized by different geographical areas within Tempe, including patrol zones and beats. The metrics include community members’ feelings of safety and levels of trust and respect towards the police. Responses are broken down further to reflect sentiments within specific demographic groups, covering general and respect-focused trust levels. Each record includes start and end dates for when the survey data was collected, providing a time-based context for analyzing sentiment changes over time. The weakness of the dataset is that the data does not align with our original dataset. Our original dataset’s date is from 2002-2011, and this dataset is more recent, with data afte 2020. We’re not sure if this works.\nCombination We haven’t started to combine the dataset yet, but we have some initial thoughts. For example, we can do some incident-based analysis. We can examine how specific types of police-public interactions (e.g., arrests, traffic stops) affect sentiment. We can match by incident identifiers and by combining incidents from both datasets, we can analyze whether particular types of police interactions correlate with higher or lower levels of trust and safety sentiments within specific demographics or locations. Also, this dataset includes many socioeconomic factors such as race, education level, income, and age, etc. We can also take these factors into account.\nDataset:Firearm Suicide Proxy for Household Gun Ownership\nDescription This dataset describes the number of homocides, the number of suicides, and the number of suicides done with firearms for whites & nonwhites within different states from 1949 to 2020. These numbers, particularly the FSS (the ratio of the number of suicides done with firearms/the total number of suicides) is used as a much less biased estimator of the total gun ownership in the US than traditional voluntary surveys, in which people underestimate the number of guns they own out of social desirability bias. Advantages of linking this particular dataset include the overlap of the demographics, state variables, and time as well as a probable connection between gun ownership and crime prevalence within communities. Luckily, this dataset has few missing values and the time periods analyzed closely correspond to those in our original dataset. Nevertheless, if used, we anticipate some problems. One problem arises from the fact that the demographic data is only split between whites and non-whites, which may prevent us from understanding the true role of demographics on police reporting data. Another problem arises from the fact that FSS is used as an estimate of gun ownership rates instead of definite numbers of guns per person/household. A separate dataset might need to be used to link FSS to gun ownership rates.\nCombination Although we haven’t started to combine the dataset, we plan on observing whether there exists a correlation between FSS (which correlates with the number of guns per capita) and crime reporting prevalence in various communities. We would expect a positive correlation, but confounding variables (demographics, safety, etc.) may make the correlation less obvious. We also plan on analyzing the differences between the FSS of whites and non-whites within different states and whether that correlates with the number of crimes reported by separate demographics. Finally, we plan on determining whether a correlation can be observed between homocide rate and general crime rate in different states.\nDataset: State-Level Household Gun Ownership Proxy Dataset\nDescription This dataset holds the count and population-adjusted rate of suicides, firearm suicides, homicides, and firearm homicides, among other figures. In general it was created by extending an existing proxy for U.S. household gun ownership rates. Most importantly this data was not compiled from self-reporting data, which can be heavily skewed based on the bias of those who choose to report. This extended proxy represents the most comprehensive report of state-level gun ownership rates and trends.\nCombination We wanted to check if this dataset would be compatible with our previous dataset. In terms of combining them into a its own study we would look to see how the gun-ownership of individuals may affect their view on their interactions with the police. In doing so we can see if those individuals in higher gun ownership states are more comfortable or apprehensive in their interactions with law enforcement. In the same affect we can see if the presence of a gun owner changes the way that law enforcement approach interactions with the public. In doing a more detailed analysis we can see if gun ownership improves the relationship of law enforcement and those they serve and protect.\nFurthermore we may also see how trends in gun ownership across time correlate to patterns in the original survey we studied. This can be used in comprehension with regional changes to better study any pattern that may exist. Having multiple means of doing so would reduce the likelihood of chance being the root cause of any patterns."
  },
  {
    "objectID": "posts/2024-10-15-Data-Background/Data Background.html",
    "href": "posts/2024-10-15-Data-Background/Data Background.html",
    "title": "Data Background",
    "section": "",
    "text": "Dataset Name: The Effect of Prior Police Contact on Victimization Reporting: Results From the Police-Public Contact and National Crime Victimization Surveys, United States, 2002-2011 (ICPSR 36370) Dataset Link\nThe data in this dataset is compiled from the National Crime Victimization Survey (NCVS) and the Police-Public Contact Survey (PPCS). Both are collected by the Bureau of Justice Statistics (BJS), which is the primary statistical agency of the US’s Department of Justice. It was first established in 1979 in order to better understand statistics about crimes in the United States. The data collected in these studies provides information on how each individuals’ prior interactions with law enforcement, both directly and through the experiences of others, influence their decisions to report crimes. By linking data from the National Crime Victimization Survey (NCVS) with the Police-Public Contact Survey (PPCS), the researchers could explore the relationship between police encounter experiences and crime reporting behavior. The combined dataset used in this study contains data about survey participants in 2002, 2008, and 2011.\nVariables common to the NCVS and PPCS were concatenated to create unique identifiers which could link the two datasets, but there was variation across different years in how much of the data that could be linked. For example, due to a switch in study design, only about 15% of participants who took the both surveys in 2011 could be included in the combined dataset. Another issue arises from the unequal weight of data of people within differing segments of the population. Because not all PPCS interviews could be matched, population estimates are not necessarily representative of the U.S. population, even though both of the original studies were designed to be representative. Additionally, since this dataset relies on responses to both of these surveys, it is possible that the sample is biased to include more individuals who experienced victimization at the hand of law enforcement, as they may be more likely to respond to the NCVS versus those who may not have.\nThe dataset provides detailed crime data in the U.S. and is used to inform policy-making decisions. Law enforcement agencies, policymakers, and researchers. These groups use this data to identify crime trends, allocate resources, and develop crime prevention strategies.\nBJS Website"
  },
  {
    "objectID": "posts/2024-10-11-First-Blog-Post/firstBlog.html",
    "href": "posts/2024-10-11-First-Blog-Post/firstBlog.html",
    "title": "First Blog",
    "section": "",
    "text": "https://www.icpsr.umich.edu/web/NACJD/studies/36370/\nThis dataset looks into how prior experiences with the police can influence one’s decision to report a crime. The data is from 2002-2011. It includes 110 variables and 105273 rows with information on the prevalence, frequency, and nature of respondents’ encounters with the police in the prior year, as well as respondents’ personal and household victimization experiences that occurred after the administration of the PPCS, including whether the crime was reported to the police. Demographic variables include age, race, gender, education, and socioeconomic status.\nThe data groups race and ethnicity in the variable label C4_RACE into these categories:\n1. White, Non-Hispanic\n2. Black, Non-Hispanic\n3. Hispanic\n4. Other or multiracial, Non-Hispanic\nThe variables for the encounters with the police are numerical such as whether the respondent was arrested or handcuffed, incident frequency, etc. which makes it easy to plot by race, gender, or other categorical variables.\nhttps://catalog.data.gov/dataset/rates-and-trends-in-heart-disease-and-stroke-mortality-among-us-adults-35-by-county-a-2000-45659\nRates and Trends in Heart Disease and Stroke Mortality Among US Adults (35+) by County, Age Group, Race/Ethnicity, and Sex – 2000-2019\nThe dataset includes 21 columns and 5,770,224 rows. There is not much said about the data being collected in this dataset, it is said that “rates and trends were estimated using Bayesian spatiotemporal model and a smoothed over space and time demographic group”. Additionally, using the 2010 US population figures, the ages are standardized to 10-year groups. There is no issue with loading and cleaning the data, however the csv function used before in class may have a row limit lower than the number of rows in this dataset. This could for example be addressed by considering a number of rows under that row limit. The dataset allows for attempts to understand what kind of stroke or deceive is prevalent among certain racial groups, regions (counties, states), genders or ages, Perhaps, there could also be a difference in regions by year, which would be interesting to see given there is a lot of change in a specific region. Immediately, a challenge will be to decide whether to include the over 5 million rows in the analysis, which would require using some other csv reader or adjust the data for this one which could alter the results of the analysis. Another challenge are the overall categories within some variables in the dataset (“overall” in sex and gender variables), which may be of not great use when we would be trying to analyze for differences by either of the variables. To conclude, the dataset seems to be rich, however it does have some aspects that may be a challenge in the initial analysis stages.\nhttps://data.nysed.gov/downloads.php\nThe data describes students enrollment reported by total public school (aggregated data for all districts and charter schools), county (aggregated data for all districts and charter schools in the county), Needs-to-Resource-Capacity (N/RC) group, district, and public schools.  \n  The ENTITY_CD is the 12-digit Basic Educational Data System (BEDS) code that uniquely identifies the entity (school, district, etc.). The need/resource capacity index, a measure of a district’s ability to meet the needs of its students with local resources, is the ratio of the estimated poverty percentage1 (expressed in standard score form) to the Combined Wealth Ratio2 (expressed in standard score form).  \n  The dataset contains the different enrollments by grade, race/ethnicity, gender and other groups."
  },
  {
    "objectID": "posts/2024-11-4-EDA/more EDA.html",
    "href": "posts/2024-11-4-EDA/more EDA.html",
    "title": "EDA",
    "section": "",
    "text": "This week, we continued exploring the dataset with a focus on relationships among different variables such as reasons for traffic stops, arrests, and the types of police contacts experienced under different demographic groups.\nFor example, below is a plot being generated. We studied the disparities in experiences of improper police contact among different racial groups. We made a bar plot to illustrate the proportion within each racial group who reported experiencing improper police contact and the result reveals notable differences across racial groups.This insight lays the groundwork for deeper analysis to understand what factors contribute to these differences, potentially using demographic and situational variables in further modeling.\n\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(tidymodels))\ndata &lt;- readRDS(\"dataset/police_interaction.rds\") \ndata |&gt;\n  filter(!is.na(PROPER)) |&gt;\n  group_by(RACE) |&gt;\n  summarize(\n    improper_proportion = sum(PROPER == 0) / n()\n  ) |&gt;\n  ggplot(aes(x = RACE, y = improper_proportion, fill = RACE)) +\n  geom_bar(stat = \"identity\")\n\n\n\n\n\n\n\n\nThis is the second plot that we would like to include here: We made a heatmap that visualizes the correlations between various binary variables in the dataset, where the color intensity represents the strength and direction of the correlation (with red indicating positive correlations and blue indicating negative correlations). There are notable positive correlations such as HHPOV and WORK_LW and notable negative correlations such as WORK_LW and any high-income indicator. This heatmap helps identify groups of binary variables that may be related or unrelated, which can be useful in modeling and to understand relationships among the data.\n\nlibrary(tidyverse)\nlibrary(reshape2)\n\n\nAttaching package: 'reshape2'\n\n\nThe following object is masked from 'package:tidyr':\n\n    smiths\n\n# Categorizing variables based on their types\n#removed \"CONTACT\" and \"ERROR\" due to \"Warning in cor(numeric_data, use = \"complete.obs\") : the standard deviation is zero\" error\nbinary_columns &lt;- c(\"MALE\", \"WORK_LW\", \"HHPOV\", \"PUB_HOUSE\",   \"PUB_HOUSE_SUB\", \"REGION\", \"INPERSON\", \"VICAR_CITIZEN\", \"VICAR_PRO_AUTO\", \"VICAR_PRO_PERS\", \"VICAR_OTH_CONT\", \"VICAR_IMPROPER\", \"D_HH_P23\", \"PROPER\")\n\nordinal_columns &lt;- c(\"C4_RACE\", \"MAR_STAT\", \"FREQ_DRV\", \"TENURE\",  \"MSA_STATUS\")\n\ncontinuous_columns &lt;- c(\"AGE\", \"EDUCATION\", \"EDUCATION_SUB\", \"NUM_MOVES\", \"NUM_CONT\", \"HH_SIZE\", \"PPCS_YEAR\", \"N_HH_P1\", \"N_PERS_P1\", \"NUM_CITIZEN_HH\", \"NUM_PRO_AUTO_HH\", \"NUM_PRO_PERS_HH\", \"NUM_OTH_CONT_HH\", \"NUM_IMPROPER_HH\")\n\nfiltered &lt;- data\n# Selecting data by type\nbinary_data &lt;- filtered %&gt;%\n  select(all_of(binary_columns)) %&gt;%\n  select(where(is.numeric))\n\nordinal_data &lt;- filtered %&gt;%\n  select(all_of(ordinal_columns)) %&gt;%\n  select(where(is.numeric))\n\ncontinuous_data &lt;- filtered %&gt;%\n  select(all_of(continuous_columns)) %&gt;%\n  select(where(is.numeric))\n\n# Calculating correlation matrices with appropriate methods\ncor_binary &lt;- cor(binary_data, use = \"pairwise.complete.obs\", method = \"pearson\")\ncor_ordinal &lt;- cor(ordinal_data, use = \"pairwise.complete.obs\", method = \"spearman\")\ncor_continuous &lt;- cor(continuous_data, use = \"pairwise.complete.obs\", method = \"pearson\")\n\n# Creating a heatmap function\nplot_heatmap &lt;- function(cor_matrix, title) {\n  cor_melted &lt;- melt(cor_matrix)\n  ggplot(cor_melted, aes(Var1, Var2, fill = value)) +\n    geom_tile(color = \"white\") +\n    scale_fill_gradient2(low = \"blue\", high = \"red\", mid = \"white\",\n                         midpoint = 0, limit = c(-1, 1), name = \"Correlation\") +\n    labs(title = title, x = \"Variables\", y = \"Variables\") +\n    theme_minimal() +\n    theme(axis.text.x = element_text(angle = 90, hjust = 1),\n          axis.text.y = element_text(angle = 0, vjust = 1))\n}\n\n# Plotting heatmaps for each correlation matrix\nif (ncol(binary_data) &gt; 1) {\n  print(plot_heatmap(cor_binary, \"Correlation Heatmap of Binary Variables\"))\n}\n\n\n\n\n\n\n\nif (ncol(ordinal_data) &gt; 1) {\n  print(plot_heatmap(cor_ordinal, \"Correlation Heatmap of Ordinal Variables\"))\n}\n\n\n\n\n\n\n\nif (ncol(continuous_data) &gt; 1) {\n  print(plot_heatmap(cor_continuous, \"Correlation Heatmap of Continuous Variables\"))\n}\n\n\n\n\n\n\n\n\nFor modeling, we used a linear model to try to predict whether someone would be arrested based on their race, years of education, if their household is living in poverty, and their gender. We separated the data into a train and test set with an 80% split. In the training set, the F-statistic is far over 1 and the p-values show over 95% confidence in all the response variables being significant.\n\nsplit &lt;- initial_split(filtered, prop = .8) #good way to keep yourself honest. splits it by prop % being in training, 1-prop being test\ntraining&lt;- training(split)\ntesting &lt;- testing(split)\npredict_filtered &lt;- training |&gt;\n  filter(!is.na(ARRESTED) & !is.na(RACE) & !is.na(EDUCATION) & !is.na(HHPOV) & !is.na(MALE))\n\nmod1 &lt;- lm(ARRESTED ~ RACE + EDUCATION + HHPOV + MALE, predict_filtered)\nsummary(mod1)\n\n\nCall:\nlm(formula = ARRESTED ~ RACE + EDUCATION + HHPOV + MALE, data = predict_filtered)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.14796 -0.03851 -0.02355 -0.00673  1.01148 \n\nCoefficients:\n                                         Estimate Std. Error t value Pr(&gt;|t|)\n(Intercept)                             0.1005132  0.0091200  11.021  &lt; 2e-16\nRACEHispanic                           -0.0332987  0.0065175  -5.109 3.28e-07\nRACEOther or multiracial, Non-Hispanic -0.0300471  0.0084248  -3.566 0.000363\nRACEWhite, Non-Hispanic                -0.0300465  0.0050001  -6.009 1.92e-09\nEDUCATION                              -0.0045524  0.0005609  -8.116 5.24e-16\nHHPOV                                   0.0215277  0.0045161   4.767 1.89e-06\nMALE                                    0.0259233  0.0027728   9.349  &lt; 2e-16\n                                          \n(Intercept)                            ***\nRACEHispanic                           ***\nRACEOther or multiracial, Non-Hispanic ***\nRACEWhite, Non-Hispanic                ***\nEDUCATION                              ***\nHHPOV                                  ***\nMALE                                   ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.1549 on 12586 degrees of freedom\nMultiple R-squared:  0.01913,   Adjusted R-squared:  0.01867 \nF-statistic: 40.92 on 6 and 12586 DF,  p-value: &lt; 2.2e-16\n\nplot(mod1)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nIn the test set, the F-statistic is much lower and the p-values and t-stats rise for each variable, with the p-value for each race variable but the intercept being over 0.1. This finding implies that there isn’t a significant relationship on average between these race categories and being arrested, although, for “Other or multiracial, Non-Hispanic”, that could be skewed by the much smaller sample size of the category compared to the other races in the category. Futhermore, the difference in performance between the testing and training data implies an overfitting that is being done by the model, that is different from actually learning the relationship.\n\npredict_filtered_test &lt;- testing |&gt;\n  filter(!is.na(ARRESTED) & !is.na(RACE) & !is.na(EDUCATION) & !is.na(HHPOV) & !is.na(MALE))\n\nmod2 &lt;- lm(ARRESTED ~ RACE + EDUCATION + HHPOV + MALE, predict_filtered_test)\nsummary(mod2)\n\n\nCall:\nlm(formula = ARRESTED ~ RACE + EDUCATION + HHPOV + MALE, data = predict_filtered_test)\n\nResiduals:\n     Min       1Q   Median       3Q      Max \n-0.13360 -0.04190 -0.02285 -0.00936  1.01456 \n\nCoefficients:\n                                        Estimate Std. Error t value Pr(&gt;|t|)\n(Intercept)                             0.082088   0.018601   4.413 1.05e-05\nRACEHispanic                            0.004917   0.012921   0.381 0.703573\nRACEOther or multiracial, Non-Hispanic -0.020445   0.017103  -1.195 0.232012\nRACEWhite, Non-Hispanic                -0.006045   0.010063  -0.601 0.548032\nEDUCATION                              -0.004763   0.001149  -4.144 3.51e-05\nHHPOV                                   0.033108   0.009843   3.364 0.000779\nMALE                                    0.023010   0.005689   4.045 5.36e-05\n                                          \n(Intercept)                            ***\nRACEHispanic                              \nRACEOther or multiracial, Non-Hispanic    \nRACEWhite, Non-Hispanic                   \nEDUCATION                              ***\nHHPOV                                  ***\nMALE                                   ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\nResidual standard error: 0.158 on 3102 degrees of freedom\nMultiple R-squared:  0.01831,   Adjusted R-squared:  0.01641 \nF-statistic: 9.644 on 6 and 3102 DF,  p-value: 1.537e-10\n\nplot(mod2)"
  },
  {
    "objectID": "posts/2024-11-15-EDA-On-Other-Dataset/More EDA.html",
    "href": "posts/2024-11-15-EDA-On-Other-Dataset/More EDA.html",
    "title": "more EDA on Other Datasets",
    "section": "",
    "text": "suppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(sf))\n\nWarning: package 'sf' was built under R version 4.4.2\n\nsuppressPackageStartupMessages(library(dplyr))\nsuppressPackageStartupMessages(library(viridis))\n\nWarning: package 'viridis' was built under R version 4.4.2\n\nsuppressPackageStartupMessages(library(maps))\n\nThis week, we picked one dataset from the two other dataset we found last week. We’ve picked the firearm suicide dataset. This dataset describes the number of homicides, the number of suicides, and the number of suicides done with firearms for whites & nonwhites within different states from 1949 to 2020. We picked this dataset since it is easier to combine by locations.\nDataset:Firearm Suicide Proxy for Household Gun Ownership\nFirst of all, we did some EDA on the second dataset. This map represents the rate of homicides by firearm by state. We were having some issues working with the mapping functions, which we have to fix. As the map borders do not currently line up with the data coordinates which is causing the coloring to be misaligned with the borders, but we are still working through solving this issue.\n\nfirearm_data &lt;- read_rds(\"dataset/firearm_sh_ds.rds\")\n\n\nfirearm_data &lt;- firearm_data |&gt;\n  mutate(firearm_homicide_rate = as.numeric(firearm_homicide_rate),\n         state = tolower(state)) |&gt;\n  filter(!is.na(firearm_homicide_rate))\n\nus_states &lt;- map_data(\"state\") |&gt;\n  as_tibble() |&gt;\n  st_as_sf(coords = c(\"long\", \"lat\"), crs = 4326) |&gt;\n  group_by(region) |&gt;\n  summarise(geometry = st_union(geometry)) |&gt;\n  st_transform(crs = 5070)\n\nus_states &lt;- us_states |&gt;\n  st_cast(\"POLYGON\")\n\nmap_data &lt;- us_states |&gt;\n  rename(state = region) |&gt;\n  left_join(firearm_data, by = \"state\")\n\nmap_data$log_firearm_homicide_rate &lt;- log(map_data$firearm_homicide_rate + 1)\n\nggplot(map_data) +\n  geom_sf(aes(fill = log_firearm_homicide_rate), color = \"black\", size = 0.2) +\n  scale_fill_viridis_c(option = \"plasma\", name = \"Homicide Rate\") +\n  theme_minimal() +\n  labs(\n    title = \"Firearm Homicide Rate by State\",\n    fill = \"Rate\"\n  ) +\n  facet_wrap(~year)\n\n\n\n\n\n\n\n\nThen, we started to combine the two datasets. We decided to combine based on locations. The first dataset was divided into four regions: Northeast, Midwest, South, and West while the second dataset was divided into different states. We planned to categorize the the states in the second dataset into regions just like the first dataset.\nIn combining the dataset we decided to do so by grouping data from both datasets by region and year. Our original dataset used regions instead of states, so by converting from states to region we used the regional definitions used by the Census Bureau Designated Regions. For each region and year we summarized the data into categories that include proportional data for certain types of incidents related to police contact, racial distributions, homicide rate, etc.\nThe combination of the data is done using the code in “/scripts/load_and_clean_data.R”. Below is a table, which displays each new column and its description. Followed by the new combined data itself.\n\nvariable_table &lt;- tibble(\n  Variable_Name = c(\"region\", \"year\", \"total_count\", \"WHITE_NH_PROP\", \"B_NH_PROP\", \"HISPANIC_PROP\", \"OTHER_MULTI_NH_PROP\", \"CONTACT_FREQ\", \"OC_FRISK_PROP\", \"TC_FRISK_PROP\", \"VSRCH_PROP\", \"ARREST_PROP\", \"CUFFED_PROP\", \"PROPER_PROP\", \"IMPROPER_PROP\", \"AVG_CONT\", \"population\", \"fa_homicides\", \"nfa_homicides\", \"homicides\", \"fa_homicide_rate\", \"nfa_homicide_rate\", \"homicide_rate\"),\n  Variable_Description = c(\"Region the data is from\", \"Year the data is from\", \"Total number of responses in the police sentiment dataset\", \"White non-hispanic proportion of responses for police sentiment\", \"Black non-hispanic proportion of responses for police sentiment\", \"Hispanic proportion of responses for police sentiment survey\", \"Other/multiracial/Non-hispanic proportion of responses for police sentiment survey\", \"Proportion of responders who had contact with law enforcement\", \"Proportion of stop and frisks for non-traffic stops\", \"Proportion of stop and frisks for traffic stops\", \"Proportion of vehicle searchs\", \"Proportions of contacts that ended in arrest\", \"Proportion of contacts that included cuffing\", \"Proportion of contacts deemed handled proper\", \"Proportion of contacts deemed unproperly handled\", \"Average number of contacts in the last year\", \"Total region population from US census\", \"Number of Firearm homicides\", \"Number of non-firearm homicides\", \"number of homidides\", \"firearm homicides per 100,000\", \"non-firearm homicides per 100,000\", \"homicides per 100,000\")\n)\n\nprint(variable_table, n = Inf)\n\n# A tibble: 23 × 2\n   Variable_Name       Variable_Description                                     \n   &lt;chr&gt;               &lt;chr&gt;                                                    \n 1 region              Region the data is from                                  \n 2 year                Year the data is from                                    \n 3 total_count         Total number of responses in the police sentiment dataset\n 4 WHITE_NH_PROP       White non-hispanic proportion of responses for police se…\n 5 B_NH_PROP           Black non-hispanic proportion of responses for police se…\n 6 HISPANIC_PROP       Hispanic proportion of responses for police sentiment su…\n 7 OTHER_MULTI_NH_PROP Other/multiracial/Non-hispanic proportion of responses f…\n 8 CONTACT_FREQ        Proportion of responders who had contact with law enforc…\n 9 OC_FRISK_PROP       Proportion of stop and frisks for non-traffic stops      \n10 TC_FRISK_PROP       Proportion of stop and frisks for traffic stops          \n11 VSRCH_PROP          Proportion of vehicle searchs                            \n12 ARREST_PROP         Proportions of contacts that ended in arrest             \n13 CUFFED_PROP         Proportion of contacts that included cuffing             \n14 PROPER_PROP         Proportion of contacts deemed handled proper             \n15 IMPROPER_PROP       Proportion of contacts deemed unproperly handled         \n16 AVG_CONT            Average number of contacts in the last year              \n17 population          Total region population from US census                   \n18 fa_homicides        Number of Firearm homicides                              \n19 nfa_homicides       Number of non-firearm homicides                          \n20 homicides           number of homidides                                      \n21 fa_homicide_rate    firearm homicides per 100,000                            \n22 nfa_homicide_rate   non-firearm homicides per 100,000                        \n23 homicide_rate       homicides per 100,000"
  },
  {
    "objectID": "posts/2024-10-28-Data-Cleaning/Data Cleaning.html",
    "href": "posts/2024-10-28-Data-Cleaning/Data Cleaning.html",
    "title": "Data Cleaning and Loading & Data for Equity",
    "section": "",
    "text": "This week, we finalized the data description and characterization before beginning the process of loading and cleaning the data. The data, which was collected from the Bureau of Justice Statistics (BJS), is a person-level and household-level dataset characterizing police encounter data, emphasizing key variables to study the relationship between police contact and victimization reporting. The raw data consists of 110 variables and 105273 unique observations.\nThe first step in the process of loading & cleaning the data was converting the tsv file we found online to a R dataset. We did so through the read_tsv tidyverse function, and the process went smoothly. There were no errors, unusual values, or oddly formatted data other than NA, or missing, values. After performing this initial data import, we decided to filter out specific variables that we didn’t intend on using in our analysis. These included variables such as PSTRATA and SECUCODE, which are more complex values used to calculate parameters like variance, and WEIGHT, which was the relative weight given to each observation due to dataset size differences across different years. We decided to remove variables like these because we realized that, in order to perform analysis of the data ourselves, it would be more accurate and meaningful to calculate these parameters from scratch. That way, we would decrease the risk of performing a biased analysis with data values we didn’t fully comprehend.\nWe also made the systematic decision to remove the variables corresponding to data about follow-up interviews, like NUM_FU_HHINT and NUM_FU_PERINT. We did so because we currently don’t intend to use that data in our analysis. Similarly, we decided to systematically remove the variable TIME2VIC_INC_P23PER because we don’t want to investigate data about the time between PPCS interview and victimization.\nFinally, we were forced to exclude certain variables from the dataset that contained values we didn’t understand. For example, all variables that ended with “_sub” were excluded because we were unsure what the description “missing carried back from later waves” from the data info sheet meant.\nAn important next step in the data cleaning process was exploring the data through barplots showing the distributions for specific variables and boxplots showing outliers. This would aid us in our analysis and further steps when working with the data. As an example, here is a function used to create boxplots:\ncreate_outlier_boxplot &lt;- function(data, col_name) { ggplot(data, aes_string(y = col_name)) + geom_boxplot(outlier.color = “red”,\noutlier.shape = 16,\noutlier.size = 2) +\nlabs(title = paste(“Boxplot of”, col_name, “with Outliers”), y = col_name) + theme_minimal() }\nData For Equity Principles:\nBeneficence: The dataset we are working on is about crimes and how interactions with police can influence how, why, or if people report them. It is important to us to not misrepresent a certain group of people as more prone to positive or negative interactions with police, as that can reflect a high degree of personal bias. We must represent the data objectively, discussing its implications and results within a wider scope and context. Nevertheless, there are always variables left out of scope that can influence the results.\nRespect for Persons: The analysis that we aim to do for this dataset is by no means definitive, and it leaves us with many open-ended questions and perhaps concerns. We do not want to bias the viewers of this analysis, and we give them the power to make their own decisions about this data. Holding an unbiased persective also allows usgiving respect to the groups showcased in the data, as we do not want to misrepresent their data."
  },
  {
    "objectID": "posts/2024-12-02-Final-Blog-Post/Final Blog Post.html",
    "href": "posts/2024-12-02-Final-Blog-Post/Final Blog Post.html",
    "title": "Final Blog Post",
    "section": "",
    "text": "For the EDA, we have done most of the analysis. For some wrapping up, we plan to add more on the combined dataset since we had enough for each single dataset. Also, we will do more EDA that is related to the thesis.\nTentative thesis: Regions with higher Non-White Proportion have higher police contact in a negative context, contributing to higher mistrust of local police departments and subsequent decreased contact of them during emergencies like commitment of crime, allowing for more crime like firearm homicide.\nFor example, we had some EDA regarding the relationship between race and improper police contact and computed the trends in firearm homicide rate for different races in different states. These can all work for the tentative thesis.\nTo polish our visualization and tables, we plan to do the following:\n\nContextual Annotations: Each visualization will include explanations to tie them back to the thesis. For example, a heatmap of firearm homicides by region will include annotations linking areas of high incidents to demographic characteristics.\nConsistency Across Outputs: By standardizing color schemes and ensuring labels are consistent across all visualizations, we aim to create a cohesive narrative. For example, we will add titles in the same format for each graph.\nPotential changes: Use the gt Package for Enhanced Table Formatting. It can transform raw data frames into visually appealing and readable tables. Also for an interactive table display, where users can sort, search, and filter data, the DT package is a great choice."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "This comes from the file about.qmd.\nThis is a website for the final project for MA[46]15 Data Science with R by Team Group 7. The members of this team are below."
  },
  {
    "objectID": "about.html#ian-ding",
    "href": "about.html#ian-ding",
    "title": "About",
    "section": "Ian Ding",
    "text": "Ian Ding\nIan is a junior studying Math and Computer Science. Github"
  },
  {
    "objectID": "about.html#arjun-patel",
    "href": "about.html#arjun-patel",
    "title": "About",
    "section": "Arjun Patel",
    "text": "Arjun Patel\nArjun Patel is a junior majoring in Medical Sciences and Applied Math. Github"
  },
  {
    "objectID": "about.html#zexian-xu",
    "href": "about.html#zexian-xu",
    "title": "About",
    "section": "Zexian Xu",
    "text": "Zexian Xu\nZexian Xu is a senior majoring in Statistics and Computer Science. Github"
  },
  {
    "objectID": "about.html#rukevwe-omusi",
    "href": "about.html#rukevwe-omusi",
    "title": "About",
    "section": "Rukevwe Omusi",
    "text": "Rukevwe Omusi\nRukevwe Omusi is a senior majoring in Data Science with a Film minor. Github"
  },
  {
    "objectID": "about.html#sviatoslav-shevchenko",
    "href": "about.html#sviatoslav-shevchenko",
    "title": "About",
    "section": "Sviatoslav Shevchenko",
    "text": "Sviatoslav Shevchenko\nSviat is a junior pursuing a dual degree in Data Science and Economics. Github\n\n\nAbout this Template.\nThis is based off of the standard Quarto website template from RStudio (2023.09.0 Build 463)."
  },
  {
    "objectID": "big_picture.html",
    "href": "big_picture.html",
    "title": "Are the Police Racist?",
    "section": "",
    "text": "Introduction\nWe often see headlines and news articles outlining the racial discrimination that minorities across the United States of America face each and every day. Many movements throughout our country’s history relate to these issues; specifically, we saw the Black Lives Matter movement of 2020 bring into question the issue of police treatment towards minority individuals. This begs us to ask the question, are police really racist? Do they approach situations involving minorities professionally? Or do they have to be stricter in these regions which face higher rates of violent crime? This study takes a deep dive into the correlation between police satisfaction rates, racial demographics, and the violent crime rates across the different regions of America to answer those questions.\n\n\nAnalysis Results\nThrough our analysis we found a significant correlation between multiple different factors and their likelihood to be treated properly during an interaction with the police.\nDuring this analysis we did indeed find that there was a strong correlation between a person’s race and their likelihood of both experiencing improper police behavior and being arrested by police during a given encounter. This was alongside a number of other variables which found that males of Black Non-Hispanic descent, with little education, living with lower annual income are the individuals with the highest likelihood of being arrested by the police.\n \nWe also found that regions with higher populations of the Black Non-Hispanic demographic faced slightly higher rates of firearm homicide when compared to their counterparts. However, our predictive model based on the combined dataset for firearm homicide and police behavior was not able to predict improper police behavior for respondents of any particular race or from any particular region.\n\nWhile the outlined factors, like race, education, income, and gender, may be strong predictors of things like homicide or arrest rates we must be sure to not label them as causes for these things.\nEven though it may be true that some police are racist, or that certain individuals are more prone to violence, its untrue to make these blanket statements about all individuals of extremely large groups across the United States. Despite the fact that certain races are more likely to be arrested, or are associated with higher rates of gun violence does not denote that police are inherently racist, or that certain races are inherently more violent.\nIn contrast these conclusions may point out certain flaws in our Nations allocation of resources, leaving certain groups of individuals more susceptible to certain situations in their lifetime. In many cases, individuals without a high level of education or income are put in more extreme circumstances that could push them to find alternative modes of sustaining their own needs. These life circumstances could force some of these individuals to make more extreme decisions leading them to have higher rates of crime and subsequently incarceration/detainment.\nThis issue of racial injustice in our country stems far beyond the surface cause of racism, but finds its roots in deep traditions of our country. Individuals of certain racial demographics or income levels often find themselves trapped in a cycle of poverty, and find themselves stuck in a life that leads to these unfortunate situations we often find ourselves reading about on the news. Finding ways to eliminate social injustice in our county is a challenge for all individuals to face together, regardless of our own personal life stories.\n\n\nInteractive Plot\nThis interactive scatter plot shows the Firearm Homicide Rate relative to racial proportions of the 4 regions. Most of the firearm homicides took place in the South, with similar firearm homicide rate in the Midwest and Northeast, and the lowest rate of firearm homicides in the West. Looking at the different scatter plots, we observed that regions with more minorities had higher firearm homicide rate, which could be related to the higher proportion of improper police behavior reported by minorities than by non-minorities.\n#| '!! shinylive warning !!': |\n#|   shinylive does not work in self-contained HTML documents.\n#|   Please set `embed-resources: false` in your metadata.\n#| standalone: true\n#| viewerHeight: 640 # You will have to adjust this to fit everything\n#| echo: false\n\n\nsuppressPackageStartupMessages(library(shiny))\nsuppressPackageStartupMessages(library(tidyverse))\noptions(\"readr.edition\" = 1) # keep this to ensure you can download the data\n\n# Define server logic ----\nserver &lt;- function(input, output) {\n  # Load the data\n  #data &lt;- read_rds(here::here(\"dataset\", \"combined_regional_data.rds\")) \n  data &lt;- read_rds(\"https://sussmanbu.github.io/ma-4615-fa24-final-project-group-7/dataset_for_shiny/combined_regional_data.rds\")\n    # Render the interactive plot\n  output$scatterPlot &lt;- renderPlot({\n    ggplot(data, aes(x = fa_homicide_rate, y = .data[[input$selected_race]])) +\n      geom_point(aes(color = as.factor(year)), size = 2, alpha = 0.7) + # Use color to differentiate years\n      geom_text(aes(label = year), vjust = -1, size = 3, alpha = 0.8) + # Add year annotations above points\n      facet_wrap(~ region) + # Optional: Facet by region\n      labs(\n        title = paste(\"Firearm Homicide Rate vs\", input$selected_race),\n        x = \"Firearm Homicide Rate\",\n        y = \"Proportion\",\n        color = \"Year\"\n      ) +\n      theme_minimal() +\n      theme(\n        legend.position = \"bottom\",       # Place legend at the bottom\n        legend.box = \"horizontal\",        # Align legend items horizontally\n        legend.text = element_text(size = 10), # Adjust legend text size\n        legend.title = element_text(size = 12), # Adjust legend title size\n        legend.key.width = unit(1, \"cm\"), # Add space between legend items\n        legend.spacing.x = unit(0.5, \"cm\") # Increase horizontal spacing\n      ) +\n      guides(\n        color = guide_legend(nrow = 1, byrow = TRUE) # Force a single-row legend\n      )\n  })\n}\n  \n# Define UI for the application ----\nui &lt;- fluidPage(\n  # Application title\n  titlePanel(\"Interactive Scatter Plot: Firearm Homicide Rate and Racial Proportions\"),\n\n  # Sidebar layout with input and output\n  sidebarLayout(\n    # Sidebar panel for inputs\n    sidebarPanel(\n      # Dropdown menu for selecting racial group\n      selectInput(\n        inputId = \"selected_race\",\n        label = \"Select a Racial Group:\",\n        choices = c(\n          \"White NH\" = \"WHITE_NH_PROP\",\n          \"Black NH\" = \"B_NH_PROP\",\n          \"Hispanic\" = \"HISPANIC_PROP\",\n          \"Other/Multi NH\" = \"OTHER_MULTI_NH_PROP\"\n        ),\n        selected = \"WHITE_NH_PROP\"\n      )\n    ),\n\n    # Main panel for displaying outputs\n    mainPanel(\n      plotOutput(outputId = \"scatterPlot\")\n    )\n  )\n)\n\n# Run the application ----\nshinyApp(ui = ui, server = server)\nEach racial group (e.g., White NH, Black NH, Hispanic, Other/Multi NH) displays distinct trends in their proportions relative to firearm homicide rates. For example, the “White NH” plot shows consistently high racial proportions but relatively low firearm homicide rates across all regions and years, while the “Black NH” plot reflects lower racial proportions with higher firearm homicide rates, especially in the South. The “Hispanic” and “Other/Multi NH” groups show intermediate trends with lower racial proportions and moderate firearm homicide rates, particularly in the West and South. Regional variation is evident, with the South generally displaying higher firearm homicide rates across all groups. This visualization highlights the relationship between racial demographics and firearm homicide rates, with disparities likely reflecting broader socioeconomic and systemic factors.\nThe second interactive plot provides an interactive map visualization that displays regional statistics as well as racial statistics for selected years (2002, 2008, 2011). Readers can select a year from the sidebar to dynamically filter and display data for that specific year.\n#| '!! shinylive warning !!': |\n#|   shinylive does not work in self-contained HTML documents.\n#|   Please set `embed-resources: false` in your metadata.\n#| standalone: true\n#| viewerHeight: 640 # You will have to adjust this to fit everything\n#| echo: false\n\nsuppressPackageStartupMessages(library(shiny))\nsuppressPackageStartupMessages(library(ggplot2))\nsuppressPackageStartupMessages(library(sf))\nsuppressPackageStartupMessages(library(leaflet))\nsuppressPackageStartupMessages(library(dplyr))\nsuppressPackageStartupMessages(library(stringr))\nsuppressPackageStartupMessages(library(tidyverse))\nsuppressPackageStartupMessages(library(readr))\noptions(\"readr.edition\" = 1)\n\n# UI for the Shiny App\nui &lt;- fluidPage(\n  titlePanel(\"Interactive Region Map with Statistics\"),\n  sidebarLayout(\n    sidebarPanel(\n      selectInput(\n        inputId = \"year\",\n        label = \"Select Year:\",\n        choices = c(\"2002\", \"2008\", \"2011\"),\n        selected = \"2002\"\n      )\n    ),\n    mainPanel(\n      leafletOutput(\"map\", height = 600)\n    )\n  )\n)\n\ngeojson_url &lt;- \"https://raw.githubusercontent.com/sussmanbu/ma-4615-fa24-final-project-group-7/main/dataset_for_shiny/region_shapefile.geojson\"\n\n# Temporary file for GeoJSON\ntemp_geojson &lt;- tempfile(fileext = \".geojson\")\n\n# Download the file\ndownload.file(geojson_url, temp_geojson)\n\n# Read the GeoJSON\nregion_shp &lt;- st_read(temp_geojson)\n\nregion_stats &lt;- read_rds(\"https://sussmanbu.github.io/ma-4615-fa24-final-project-group-7/dataset_for_shiny/combined_regional_data.rds\")\nregion_shp &lt;- region_shp |&gt;\n  filter(!is.na(region))\n\n# Server logic for the Shiny App\nserver &lt;- function(input, output) {\n  \n  filtered_data &lt;- reactive({\n    stats_filtered &lt;- region_stats |&gt;\n      filter(year == input$year) |&gt;\n      mutate(region = str_to_title(region))\n    \n    join &lt;- region_shp |&gt;\n      left_join(stats_filtered, by = c(\"region\" = \"region\"))\n    \n    joined_data &lt;- join |&gt;\n      mutate(across(\n        .cols = ends_with(\"_PROP\"),\n        .fns = ~ round(.x * 100, 2)\n      )) |&gt;\n      mutate(across(\n        .cols = ends_with(\"_rate\"),\n        .fns = ~ round(.x, 2)\n      ))\n    \n    return(joined_data)\n  })\n  \n  output$map &lt;- renderLeaflet({\n    shp_data &lt;- filtered_data()\n    \n    pal &lt;- colorFactor(\n      palette = \"Set1\",\n      domain = shp_data$region\n    )\n    \n    leaflet(shp_data) |&gt;\n      addProviderTiles(providers$CartoDB.Positron) |&gt;\n      addPolygons(\n        fillColor = ~pal(region),\n        fillOpacity = 0.7,\n        color = \"black\",\n        weight = 1,\n        popup = ~paste0(\"Region: \", region, \"&lt;br&gt;\",\n                       \"White NH Prop: \", WHITE_NH_PROP, \"%&lt;br&gt;\",\n                      \"Black NH Prop: \", B_NH_PROP, \"%&lt;br&gt;\",\n                      \"Hispanic Prop: \", HISPANIC_PROP, \"%&lt;br&gt;\",\n                      \"Other Multi NH Prop: \", OTHER_MULTI_NH_PROP, \"%&lt;br&gt;\",\n                      \"Arrest Prop: \", ARREST_PROP, \"%&lt;br&gt;\",\n                      \"Improper Prop: \", IMPROPER_PROP, \"%&lt;br&gt;\",\n                      \"FA Homicide Rate: \", fa_homicide_rate, \" Homicides per 100,000 People\"),\n        highlight = highlightOptions(\n          weight = 3,\n          color = \"blue\",\n          fillOpacity = 0.7\n        )\n      )\n  })\n}\n\n# Run the Shiny app\nshinyApp(ui = ui, server = server)"
  }
]